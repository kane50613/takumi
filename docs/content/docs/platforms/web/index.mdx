---
title: Web (WASM) Integration
---

Compiled to WebAssembly for browser compatibility. The WASM binary is downloaded client-side. For server-side rendering, see [In Node.js/Bun](#in-nodejsbun).

Web worker integration is under development. Contributions welcome!

```bash
npm install @takumi-rs/wasm @takumi-rs/helpers
```

#### Vite

```javascript
import init, { Renderer } from "@takumi-rs/wasm";
import wasmUrl from "@takumi-rs/wasm/takumi_wasm_bg.wasm?url";

await init(wasmUrl);

const renderer = new Renderer();
```

#### Webpack

To use Takumi WASM with Webpack, you need to configure Webpack to handle `.wasm` files as assets. Add the following to your `webpack.config.js`:

```js
module.exports = {
  module: {
    rules: [
      {
        test: /\.wasm$/,
        type: 'asset/resource',
        generator: {
          filename: 'wasm/[name].[hash][ext]'
        }
      }
    ]
  }
};
```

Then, in your code, import the WASM file and initialize the module:

```js
import init, { Renderer } from '@takumi-rs/wasm';
import wasmUrl from '@takumi-rs/wasm/takumi_wasm_bg.wasm';

await init(wasmUrl);
const renderer = new Renderer();
```

#### Next.js

Next.js (with Webpack 5+) also supports importing WASM as assets. You can use the [same Webpack rule as above](#webpack) by customizing your `next.config.js`:

```js
// next.config.js
module.exports = {
  webpack(config) {
    config.module.rules.push({
      test: /\.wasm$/,
      type: 'asset/resource',
      generator: {
        filename: 'static/wasm/[name].[hash][ext]'
      }
    });
    return config;
  },
};
```

Then, import and initialize the WASM module in your component or page:

```js
import init, { Renderer } from '@takumi-rs/wasm';
import wasmUrl from '@takumi-rs/wasm/takumi_wasm_bg.wasm';

useEffect(() => {
  (async () => {
    await init(wasmUrl);
    const renderer = new Renderer();
    // ... your code ...
  })();
}, []);
```

#### No Bundler

For direct browser usage without a bundler, download files locally or use a CDN like unpkg.

```javascript
import { container, text, percentage } from "https://unpkg.com/@takumi-rs/helpers";
import init, { Renderer } from "https://unpkg.com/@takumi-rs/wasm";

await init("http://unpkg.com/@takumi-rs/wasm/takumi_wasm_bg.wasm");

const renderer = new Renderer();
```

### Font Loading

All setups require explicit font loading for text rendering:

```javascript
// Method 1: Load from your assets
const fontResponse = await fetch('/fonts/NotoSans-Regular.ttf');
const fontData = new Uint8Array(await fontResponse.arrayBuffer());
renderer.loadFont(fontData);

// Method 2: Load multiple fonts
const fontUrls = [
  '/fonts/NotoSans-Regular.ttf',
  '/fonts/NotoSans-Bold.ttf',
  '/fonts/NotoColorEmoji.ttf'
];

for (const url of fontUrls) {
  const response = await fetch(url);
  const data = new Uint8Array(await response.arrayBuffer());
  renderer.loadFont(data);
}
```